{"version":3,"sources":["services/observations.js","services/login.js","components/Notification.js","components/Footer.js","components/loginForm.js","components/ObservationForm.js","components/Togglable.js","App.js","serviceWorker.js","index.js"],"names":["baseUrl","process","token","getAll","order","request","axios","get","then","response","window","localStorage","setItem","data","catch","error","getItem","create","newObject","a","config","headers","Authorization","observations","concat","post","update","id","put","setToken","newToken","remove","delete","getAllOffline","login","credentials","console","log","logout","register","name","username","password","Notification","message","className","Footer","style","color","fontStyle","fontSize","LoginForm","handleSubmit","handleUsernameChange","handlePasswordChange","onSubmit","value","onChange","type","ObservationForm","handleNewRarityChange","handleNewNameChange","handleNewScientificNameChange","newName","newRarity","newScientificName","handleNewNoteChange","newNote","Togglable","React","forwardRef","props","ref","useState","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","onClick","buttonLabel","children","Observation","state","noteOpen","observation","this","key","scientificName","moment","datetime","format","rarity","split","join","note","setState","substring","Component","App","setObservations","setNewName","setNewRarity","setNewScientificName","setNewNote","setUsername","setPassword","user","setUser","errorMessage","setErrorMessage","loginVisible","setLoginVisible","filterObservations","setFilterObservations","filterObservationsByRarity","setFilterObservationsByRarity","useEffect","observationService","initialObservations","loggedUserJSON","JSON","parse","handleLogin","event","preventDefault","loginService","stringify","setTimeout","observationFormRef","createRef","observationFormProps","current","observationObject","returnedObject","target","loginForm","filter","toLowerCase","includes","filterObservation","filterObservationByRarity","map","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","document","getElementById","URL","href","origin","addEventListener","fetch","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.1675b013.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = process.env.REACT_APP_API_URL || '/api'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = (order='-1') => {\n  const request = axios.get(baseUrl + '/observations?order=' + order)\n  \n  return request.then(response => {\n    window.localStorage.setItem('observations', response.data)\n    return response.data\n  }).catch(error => {\n    window.localStorage.getItem('observations')\n  })\n}\n\nexport const getAllOffline = () => {\n  return window.localStorage.getItem('observations')\n}\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  \n  let observations = window.localStorage.getItem('observations') || []\n  window.localStorage.setItem('observations', observations.concat(newObject))\n  const response = await axios.post(baseUrl + '/observations', newObject, config)\n\n  return response.data\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/observations/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/observations/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, setToken, remove, getAllOffline }","import axios from 'axios'\nconst baseUrl = process.env.REACT_APP_API_URL || '/api'\n\nconst login = async credentials => {\n  console.log('logging in...', credentials)\n  const response = await axios.post(baseUrl + '/login', credentials)\n  return response.data\n}\n\nconst logout = async () => {\n  console.log('logging out...')\n  const response = await axios.post(baseUrl + '/logout')\n  return response.data\n}\n\nconst register = async (name, username, password)  => {\n  console.log('creating user...')\n  const response = await axios.post(baseUrl + '/register')\n  return response.data\n}\n\nexport default { login, logout, register }","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","  \nimport React from 'react'\n\nconst Footer = () => {\n  const footerStyle = {\n    color: 'green',\n    fontStyle: 'italic',\n    fontSize: 16\n  }\n\n  return (\n    <div style={footerStyle}>\n      <br />\n      <em>Birdie, Elisa Nurmi 2019</em>\n    </div>\n  )\n}\n\nexport default Footer","import React from 'react'\n\nconst LoginForm = ({\n   handleSubmit,\n   handleUsernameChange,\n   handlePasswordChange,\n   username,\n   password\n  }) => {\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <div>\n          Username <input\n            value={username}\n            onChange={handleUsernameChange}\n          />\n        </div>\n        <div>\n          Password <input\n            type=\"password\"\n            value={password}\n            onChange={handlePasswordChange}\n          />\n      </div>\n        <button type=\"submit\">Login</button>\n      </form>\n    </div>\n  )\n}\n\nexport default LoginForm","import React from 'react'\n\nconst ObservationForm = ({ \n  onSubmit, \n  handleNewRarityChange, \n  handleNewNameChange, \n  handleNewScientificNameChange, \n  newName, \n  newRarity, \n  newScientificName,\n  handleNewNoteChange,\n  newNote \n}) => {\n  \n    return (\n    <div>\n      <h2 className=\"create-observation-title\">Create a new observation</h2>\n      <form onSubmit={onSubmit}>\n      <label>Name*</label>\n      <input\n          value={newName}\n          onChange={handleNewNameChange}/>\n\n      <br />\n      <label>Scientific name</label>\n      <input\n          value={newScientificName}\n          onChange={handleNewScientificNameChange}\n        />\n\n      <br />\n      <label>Rarity</label>\n      <select value={newRarity} onChange={handleNewRarityChange}>\n        <option value=\"common\">Common</option>\n        <option value=\"rare\">Rare</option>\n        <option value=\"extremely rare\">Extremely rare</option>\n      </select>\n     <br />\n      <label>Notes<br/>\n      <textarea\n          value={newNote}\n          onChange={handleNewNoteChange}\n        />\n    </label>\n    <br/>\n    <button type=\"submit\">Save</button>\n    </form>\n\n    </div>\n  )\n}\n\nexport default ObservationForm","import React, { useState, useImperativeHandle } from 'react'\n\nconst Togglable = React.forwardRef((props, ref) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      toggleVisibility\n    }\n  })\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {props.children}\n        <button onClick={toggleVisibility}>cancel</button>\n      </div>\n    </div>\n  )\n})\n\nexport default Togglable","import React, { useState, useEffect, Component } from 'react';\n// import logo from './vladimir-kudinov-orng-mDXPnk-unsplash.jpg';\nimport './App.css';\nimport observationService, { getAllOffline } from './services/observations';\nimport moment from 'moment'\nimport loginService from './services/login'\n// import { nextTick } from 'q';\nimport Notification from './components/Notification'\nimport Footer from './components/Footer'\nimport LoginForm from './components/loginForm'\nimport ObservationForm from './components/ObservationForm';\nimport Togglable from './components/Togglable'\n\nclass Observation extends Component {\n  state = {\n    noteOpen: false\n  }\n  \n  render() {\n    const { observation } = this.props\n    const { noteOpen } = this.state\n\n    return(\n    <div key={observation.id} className=\"observation-row\">\n      <span className=\"observation-name\">{observation.name}</span> <span className=\"observation-scientificname\">({observation.scientificName})</span> <span className=\"observation-time\">{moment(observation.datetime).format('HH:MM:SS DD.MM.YYYY')}</span>\n      <span className={`observation-rarity observation-rarity--${observation.rarity.split(' ').join('-')}`}>{observation.rarity}</span>\n      <div className=\"observation-note\">{noteOpen ? (\n        <>\n        { observation.note} <button onClick={() => this.setState({noteOpen:false})}>Show less</button>\n        </>\n      ) : (\n        <>\n          {observation.note.substring(0, 120)}... <button onClick={() => this.setState({noteOpen:true})}>Show more</button>\n        </>\n        )\n      }</div>\n      {/*<button onClick={ e => e.preventDefault() & observationService.remove(observation.id) }>Delete</button>*/}\n    </div>\n    )\n  }\n}\n\nfunction App() {\n\n  const [observations, setObservations] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newRarity, setNewRarity] = useState('common')\n  const [newScientificName, setNewScientificName] = useState('')\n  const [newNote, setNewNote] = useState('')\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [loginVisible, setLoginVisible] = useState(false)\n  const [filterObservations, setFilterObservations] = useState('')\n  const [filterObservationsByRarity, setFilterObservationsByRarity] = useState('')\n\n\n  // fetch all observations from API\n  useEffect(() => {\n    observationService\n      .getAll()\n      .then(initialObservations => {\n        setObservations(initialObservations)\n      })\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBirdieUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      observationService.setToken(user.token)\n    }\n  }, [])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n\n      window.localStorage.setItem(\n        'loggedBirdieUser', JSON.stringify(user))\n\n      observationService.setToken(user.token)\n      setUser(user)\n      setUsername('')\n      setPassword('')\n    } catch (exception) {\n      setErrorMessage('wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const addObservation = event => {\n    event.preventDefault()\n    observationFormRef.current.toggleVisibility()\n    const observationObject = {\n      name: newName,\n      scientificName: newScientificName,\n      note: newNote,\n      rarity: newRarity\n    }\n\n    observationService\n      .create(observationObject)\n      .then(returnedObject => {\n        setObservations([returnedObject].concat(observations))\n        setNewName('')\n        setNewScientificName('')\n        setNewRarity('common')\n        setNewNote('')\n      })\n      .catch(returnedObject => {\n        setErrorMessage('Error')\n      })\n  }\n\n  const filterObservation = (observation) => {\n    return observation.name.toLowerCase().includes(filterObservations.toLowerCase())\n    || observation.scientificName.toLowerCase().includes(filterObservations.toLowerCase())\n    || observation.note.toLowerCase().includes(filterObservations.toLowerCase())\n  }\n\n  const filterObservationByRarity = (observation) => {\n    if(filterObservationsByRarity === '')\n      return true\n\n    return observation.rarity === filterObservationsByRarity\n  }\n\n\n  const observationRows = () => observations\n  .filter(observation => filterObservation(observation))\n  .filter(observation => filterObservationByRarity(observation))\n  .map(observation =>\n    <Observation\n      key={observation.id}\n      observation={observation}\n    />\n  )\n\n  const handleNewNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewScientificNameChange = (event) => {\n    setNewScientificName(event.target.value)\n  }\n\n  const handleNewNoteChange = (event) => {\n    setNewNote(event.target.value)\n  }\n\n  const handleNewRarityChange = (event) => {\n    setNewRarity(event.target.value)\n  }\n  const handleFilterObservationsChange = (event) => {\n    setFilterObservations(event.target.value)\n  }\n  const handleFilterObservationsByRarityChange = (event) => {\n    setFilterObservationsByRarity(event.target.value)\n  }\n\n  const loginForm = () => {\n    const hideWhenVisible = { display: loginVisible ? 'none' : '' }\n    const showWhenVisible = { display: loginVisible ? '' : 'none' }\n\n    return (\n      <div>\n        <div style={hideWhenVisible}>\n          <button onClick={() => setLoginVisible(true)}>Login</button>\n        </div>\n        <div style={showWhenVisible}  className=\"login-form\">\n          <LoginForm\n            username={username}\n            password={password}\n            handleUsernameChange={({ target }) => setUsername(target.value)}\n            handlePasswordChange={({ target }) => setPassword(target.value)}\n            handleSubmit={handleLogin}\n          />\n          <button onClick={() => setLoginVisible(false)}>Cancel</button>\n        </div>\n      </div>\n    )\n  }\n\n  const observationFormRef = React.createRef()\n  let observationFormProps = {\n    onSubmit: addObservation,\n    newName,\n    handleNewNameChange,\n    newRarity,\n    handleNewRarityChange,\n    newScientificName,\n    handleNewScientificNameChange,\n    newNote,\n    handleNewNoteChange\n  }\n\n  return (\n    <div className=\"page\">\n      <div className=\"header\">\n      <h1 className=\"title\">Birdie</h1>\n      <div className=\"login\">\n          {user === null ?\n          loginForm() :\n            <div>\n              {user.name}\n            </div>\n          }\n        </div>\n    </div>\n\n    <div className=\"top-menu\">\n    <div className=\"create-observations\">\n    {user === null ? (`Please login to add observations`) : (<>\n    <Togglable buttonLabel=\"New observation\" ref={observationFormRef} >\n            <ObservationForm {...observationFormProps} />\n          </Togglable >\n</>\n    )}\n    </div>\n\n    <div className=\"error-message\">\n      <Notification message={errorMessage} />\n    </div>\n    </div>\n\n    <div className=\"search\">\n      <label>Search</label>\n      <input\n          value={filterObservations}\n          onChange={handleFilterObservationsChange}\n        />\n\n      <br/>\n      <label>Rarity</label>\n      <select\n          value={filterObservationsByRarity}\n          onChange={handleFilterObservationsByRarityChange}>\n          <option value=\"\">All</option>\n          <option value=\"common\">Common</option>\n          <option value=\"rare\">Rare</option>\n          <option value=\"extremely rare\">Extremely rare</option>\n        </select>\n      </div>\n\n      <div className=\"observations-rows\">{observationRows()}</div>\n\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\n\nif(process.env.NODE_ENV==='development')\n  console.log('In development mode')\n\nif(process.env.NODE_ENV==='test')\n  console.log('In test mode')\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}